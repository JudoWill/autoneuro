---

title: Motivating Example


keywords: fastai
sidebar: home_sidebar



nb_path: "02_clinical_explanation.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_clinical_explanation.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Which patient is "impaired"?
Which patient is "more impaired"?
We could naively assume that since patient 2 scored worse across all metrics, that they are likely impaired while P1 is normal.</p>
<p>It would also make sense to take into account that P2 is older than P1.
Here's where age-matched control data comes in handy.</p>
<p>First, we need to calculate some intermediate values from these test.</p>
<ul>
<li><code>immediate</code>: the sum of the three trials</li>
<li><code>regonition</code>: the number of hits - false-positive recognitions</li>
<li><code>retention</code>: ratio of delayed successes and largest of the trial 2 &amp; trial 3 successes</li>
</ul>
<p><code>autoneuro</code> can facilitate this <em>with explanations</em>!
We'll create a <a href="/autoneuro/calculators.html#TestCalculator"><code>TestCalculator</code></a> called <code>bvmt_derived_calculator</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bvmt_derived_calculator</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="n">P1_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: delay:8, false_pos:2, hits:6, trial1:5, trial2:6, trial3:7
Calculating: [&#39;immediate&#39;]
Used Equation: trial1+trial2+trial3 = 18 = immediate 

Calculating: [&#39;retention_denom&#39;]
Aggregation: max [trial2, trial3]  = 7 

Calculating: [&#39;retention&#39;]
Used Equation: delay/retention_denom = 1.1428571428571428 = retention 

Calculating: [&#39;retention&#39;]
Clipped retention to [0, 1] 

Calculating: [&#39;recognition&#39;]
Used Equation: hits-false_pos = 4.0 = recognition 

Resulting in: immediate:18.0, recognition:4.0, retention:1.0, retention_denom:7.0
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bvmt_derived_calculator</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="n">P2_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: delay:6, false_pos:1, hits:4, trial1:4, trial2:6, trial3:5
Calculating: [&#39;immediate&#39;]
Used Equation: trial1+trial2+trial3 = 15 = immediate 

Calculating: [&#39;retention_denom&#39;]
Aggregation: max [trial2, trial3]  = 6 

Calculating: [&#39;retention&#39;]
Used Equation: delay/retention_denom = 1.0 = retention 

Calculating: [&#39;retention&#39;]
Clipped retention to [0, 1] 

Calculating: [&#39;recognition&#39;]
Used Equation: hits-false_pos = 3.0 = recognition 

Resulting in: immediate:15.0, recognition:3.0, retention:1.0, retention_denom:6.0
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These derived values are what Heaton et al normalized across ages.
Let's take a look at one.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>head -n <span class="m">19</span> data/norms/from_kate/heaton_bvmt.yaml
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>short_name: &#39;heatonBVMT&#39;
reference: &#39;Excel Sheet Lookup Conversion&#39;

operations:
  - type: normative_lookup
    measure_col: immediate
    filter_cols: [&#39;age&#39;]
    out_name: &#39;heaton_immediate&#39;

    table:
      - filter: (18 &lt;= age) &amp; (age &lt;= 21)
        mean: 28.74
        std: 4.32
      - filter: (20 &lt;= age) &amp; (age &lt;= 23)
        mean: 28.44
        std: 4.38
      - filter: (24 &lt;= age) &amp; (age &lt;= 25)
        mean: 27.83
        std: 4.48
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is a collection of filters (in this case ages) that define a mean and standard deviation for a group.</p>
<p>For example:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">NORM_INFO</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Filter</th>
      <th>Mean</th>
      <th>STD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>P1</th>
      <td>(30 &lt;= age) &amp; (age &lt;= 33)</td>
      <td>26.92</td>
      <td>4.64</td>
    </tr>
    <tr>
      <th>P2</th>
      <td>(71 &lt;= age) &amp; (age &lt;= 74)</td>
      <td>20.83</td>
      <td>5.71</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'd expect P1 to have have an <code>immediate</code> score of ~27 +/- 4.5.
We actually saw 18, about 2 SDs below age matched controls.</p>
<p>For P2 we'd expect to see ~21 +/- 5.7. We actually saw 15, about 1.1 SDs below average.</p>
<p>It would seem that P1 is likely impaired while P2 is borderline.</p>
<p>Lets see an explanation.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">heaton_bvmt_calculator</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="n">P1_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: age:32, delay:8, false_pos:2, hits:6, trial1:5, trial2:6, trial3:7
Calculating: [&#39;immediate&#39;]
Used Equation: trial1+trial2+trial3 = 18 = immediate 

Calculating: [&#39;retention_denom&#39;]
Aggregation: max [trial2, trial3]  = 7 

Calculating: [&#39;retention&#39;]
Used Equation: delay/retention_denom = 1.1428571428571428 = retention 

Calculating: [&#39;retention&#39;]
Clipped retention to [0, 1] 

Calculating: [&#39;recognition&#39;]
Used Equation: hits-false_pos = 4.0 = recognition 

Calculating: [&#39;heaton_immediate&#39;]
heaton_immediate: Matched (30 &lt;= age) &amp; (age &lt;= 33), Expecting 26.92 +- 4.64, Observed: 18.0, Z: -1.9224137931034488 

Calculating: [&#39;heaton_retention&#39;]
heaton_retention: Matched (30 &lt;= age) &amp; (age &lt;= 33), Expecting 0.962 +- 0.0474, Observed: 1.0, Z: 0.8016877637130809 

Calculating: [&#39;heaton_delay&#39;]
heaton_delay: Matched (30 &lt;= age) &amp; (age &lt;= 33), Expecting 10.13 +- 1.6, Observed: 8.0, Z: -1.3312500000000005 

Calculating: [&#39;heaton_recognition&#39;]
heaton_recognition: Matched (30 &lt;= age) &amp; (age &lt;= 33), Expecting 5.97 +- 0.15, Observed: 4.0, Z: -13.133333333333333 

Resulting in: heaton_delay:-1.3312500000000005, heaton_immediate:-1.9224137931034488, heaton_recognition:-13.133333333333333, heaton_retention:0.8016877637130809, immediate:18.0, recognition:4.0, retention:1.0, retention_denom:7.0
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">heaton_bvmt_calculator</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="n">P2_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: age:71, delay:6, false_pos:1, hits:4, trial1:4, trial2:6, trial3:5
Calculating: [&#39;immediate&#39;]
Used Equation: trial1+trial2+trial3 = 15 = immediate 

Calculating: [&#39;retention_denom&#39;]
Aggregation: max [trial2, trial3]  = 6 

Calculating: [&#39;retention&#39;]
Used Equation: delay/retention_denom = 1.0 = retention 

Calculating: [&#39;retention&#39;]
Clipped retention to [0, 1] 

Calculating: [&#39;recognition&#39;]
Used Equation: hits-false_pos = 3.0 = recognition 

Calculating: [&#39;heaton_immediate&#39;]
heaton_immediate: Matched (71 &lt;= age) &amp; (age &lt;= 74), Expecting 20.83 +- 5.71, Observed: 15.0, Z: -1.0210157618213658 

Calculating: [&#39;heaton_retention&#39;]
heaton_retention: Matched (71 &lt;= age) &amp; (age &lt;= 74), Expecting 0.878 +- 0.143, Observed: 1.0, Z: 0.8531468531468532 

Calculating: [&#39;heaton_delay&#39;]
heaton_delay: Matched (71 &lt;= age) &amp; (age &lt;= 74), Expecting 7.93 +- 2.36, Observed: 6.0, Z: -0.8177966101694915 

Calculating: [&#39;heaton_recognition&#39;]
heaton_recognition: Matched (71 &lt;= age) &amp; (age &lt;= 74), Expecting 5.64 +- 0.91, Observed: 3.0, Z: -2.9010989010989006 

Resulting in: heaton_delay:-0.8177966101694915, heaton_immediate:-1.0210157618213658, heaton_recognition:-2.9010989010989006, heaton_retention:0.8531468531468532, immediate:15.0, recognition:3.0, retention:1.0, retention_denom:6.0
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can look at these next to each other.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">process_df</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>P1</th>
      <th>P2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>heaton_immediate</th>
      <td>-1.922414</td>
      <td>-1.021016</td>
    </tr>
    <tr>
      <th>heaton_delay</th>
      <td>-1.331250</td>
      <td>-0.817797</td>
    </tr>
    <tr>
      <th>heaton_retention</th>
      <td>0.801688</td>
      <td>0.853147</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These numbers are in z-scale. Meaning:</p>
<ul>
<li>A "control" will score 0 the standard deviation of scores 1</li>
<li>An impaired individual will have a negative value.</li>
</ul>
<p>While cutoffs can vary by application, anything below -2 is "impaired", between -1 and -2 as "borderline" everything above as "normal".</p>
<p>Therefore we'd say P1 is nearly impaired in their immediate recognition, and borderline in their delayed memory.
P2 is performing within the 1 SD of age-matched controls.</p>

</div>
</div>
</div>
</div>
 

